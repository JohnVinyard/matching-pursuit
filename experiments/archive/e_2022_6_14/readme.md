Try again with conditional diffusion model and step embeddings